<!DOCTYPE html>
<html>
<head>
  <title>AIMS Admin Management</title>
  <link rel="stylesheet" href="/css/style.css">
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; line-height: 1.6; background: #f5f7fa; }
    .container { max-width: 1400px; margin: 0 auto; padding: 2rem; }
    h1 { color: #1a365d; margin-bottom: 0.5rem; }
    .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; }
    .btn-logout { 
      background: #e53e3e; color: white; padding: 0.75rem 1.5rem; 
      border: none; border-radius: 6px; cursor: pointer; font-weight: 500;
      text-decoration: none; display: inline-block;
    }
    .btn-logout:hover { background: #c53030; }
    
    .stats-grid { 
      display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); 
      gap: 1.5rem; margin: 2rem 0; 
    }
    .stat-card { 
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
      color: white; padding: 1.5rem; border-radius: 12px; text-align: center;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    .stat-card strong { font-size: 2rem; display: block; }
    
    .section { background: white; padding: 2rem; border-radius: 12px; margin: 2rem 0; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
    form { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; }
    input, select { padding: 0.75rem; border: 2px solid #e2e8f0; border-radius: 6px; font-size: 1rem; }
    input:focus, select:focus { outline: none; border-color: #4299e1; box-shadow: 0 0 0 3px rgba(66,153,225,0.1); }
    button[type="submit"] { 
      background: #38a169; color: white; border: none; padding: 0.75rem 2rem; 
      border-radius: 6px; font-size: 1rem; font-weight: 600; cursor: pointer; 
      grid-column: 1 / -1; justify-self: center;
    }
    button[type="submit"]:hover { background: #2f855a; }
    button[type="submit"]:disabled { background: #a0aec0; cursor: not-allowed; }
    
    table { width: 100%; border-collapse: collapse; margin-top: 1rem; }
    th { background: #edf2f7; padding: 1rem 0.75rem; text-align: left; font-weight: 600; color: #4a5568; }
    td { padding: 0.875rem 0.75rem; border-bottom: 1px solid #e2e8f0; }
    tr:hover { background: #f7fafc; }
    .badge { padding: 0.25rem 0.5rem; border-radius: 9999px; font-size: 0.75rem; font-weight: 500; }
    .badge-student { background: #bee3f8; color: #2c5282; }
    .badge-instructor { background: #c6f6d5; color: #22543d; }
    .badge-advisor { background: #fed7aa; color: #744210; }
    
    .loading { text-align: center; padding: 2rem; color: #718096; }
    @media (max-width: 768px) { .stats-grid { grid-template-columns: 1fr; } }
  </style>
  <script src="/js/admin.js" defer></script>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>Admin Management Portal</h1>
      <button class="btn-logout" onclick="logout()">Logout</button>
    </div>
    
    <!-- Stats -->
    <div class="stats-grid">
      <div class="stat-card">
        <div>üë• Total Users</div>
        <strong id="totalUsers">0</strong>
      </div>
      <div class="stat-card">
        <div>üìö Total Courses</div>
        <strong id="totalCourses">0</strong>
      </div>
      <div class="stat-card">
        <div>üìã Total Enrollments</div>
        <strong id="totalEnrollments">0</strong>
      </div>
      <div class="stat-card">
        <div>‚è≥ Pending Approvals</div>
        <strong id="pendingEnrollments">0</strong>
      </div>
    </div>
    
    <!-- Create User -->
    <div class="section">
      <h2>Create New User</h2>
      <form id="userForm">
        <input type="email" id="email" name="email" placeholder="user@iitrpr.ac.in" required>
        <input type="text" id="name" name="name" placeholder="Full Name" required>
        <select id="role" name="role" required>
          <option value="">Select Role</option>
          <option value="student">Student</option>
          <option value="instructor">Instructor</option>
          <option value="advisor">Advisor</option>
        </select>
        <input type="text" id="user_id" name="user_id" placeholder="BT23CSE001 or EMP001" required>
        <input type="text" id="department" name="department" placeholder="CSE" required>
        <input type="password" id="userPassword" name="password" placeholder="Custom pass (optional: 123456)">
        <button type="submit">Create User</button>
      </form>
    </div>
    
    <!-- Users Table -->
    <div class="section">
      <h2>All Users</h2>
      <table>
        <thead>
          <tr>
            <th>Email</th>
            <th>Name</th>
            <th>Role</th>
            <th>User ID</th>
            <th>Department</th>
          </tr>
        </thead>
        <tbody id="usersTableBody">
          <tr><td colspan="5" class="loading">Loading users...</td></tr>
        </tbody>
      </table>
    </div>
    
    <!-- Courses Overview -->
    <div class="section">
      <h2>Courses Overview</h2>
      <table>
        <thead>
          <tr>
            <th>Code</th>
            <th>Title</th>
            <th>Department</th>
            <th>Instructor</th>
            <th>Credits</th>
            <th>Session (Enrolled)</th>
          </tr>
        </thead>
        <tbody id="coursesTableBody">
          <tr><td colspan="6" class="loading">Loading courses...</td></tr>
        </tbody>
      </table>
    </div>
  </div>
</body>
</html>
